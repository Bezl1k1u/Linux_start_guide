# Операционные системы UNIX/Linux (Базовый).

Установка и обновления системы Linux. Основы администрирования.

## Contents
1. [Part 1. Установка ОС](#part-1-установка-ос)
2. [Part 2. Создание пользователя](#part-2-создание-пользователя) \
    2.1 [Проверка](#examination)
3. [Part 3. Настройка сети ОС](#part-3-настройка-сети-ос) \
    3.1 [Утилита net-tools](#плагин-net-tools) \
    3.2 [Расшифровка интерфейса lo](#расшифровка-интерфейса-lo) \
    3.3 [Расшифровка DHCP](#расшифровка-dhcp) \
    3.4 [Curl (Client URL)](#34-curl-client-url) \
    3.5 [Изменение файла netplan](#изменение-файла-netplan)
4. [Part 4. Обновление ОС](#part-4-обновление-ос)
5. [Part 5. Использование команды sudo](#part-5-использование-команды-sudo)
6. [Part 6. Установка и настройка службы времени](#part-6-установка-и-настройка-службы-времени)\
    6.1 [Утилита NTP](#61-утилита-ntp)
7. [Part 7. Установка и использование текстовых редакторов](#part-7-установка-и-использование-текстовых-редакторов) \
    7.1 [Редактор JOE](#редактор-joe) \
    7.2 [Редактор VIM](#редактор-vim) \
    7.3 [Редактор NANO](#редактор-nano) 
8. [Part 8. Установка и базовая настройка сервиса SSHD](#part-8-установка-и-базовая-настройка-сервиса-sshd) \
    8.1 [NETSTAT](#netstat) 
9. [Part 9. Установка и использование утилит top, htop](#part-9-установка-и-использование-утилит-top-htop)
10. [Part 10. Использование утилиты fdisk](#part-10-использование-утилиты-fdisk)
11. [Part 11. Использование утилиты df](#part-11-использование-утилиты-df)
12. [Part 12. Использование утилиты du](#part-12-использование-утилиты-du)
13. [Part 13. Установка и использование утилиты ncdu](#part-13-установка-и-использование-утилиты-ncdu)
14. [Part 14. Работа с системными журналами](#part-14-работа-с-системными-журналами)
15. [Part 15. Использование планировщика заданий CRON](#part-15-использование-планировщика-заданий-cron)

>От разработчика Scourgea: \
>Для полного погружения можешь на время чтения проекта включить любимую джазовую композицию.


## Part 1. Установка ОС

Установлен `Ubuntu 20.04 Server LTS` без графического интерфейса, команда для просмотра `cat /etc/issue`

![вывод информации об системе](screenshots/Part1/Part1.jpg)


## Part 2. Создание пользователя

Создаю нового пользователя командой `sudo adducer username` (вместо username мы должны записать имя пользователя, которого мы создадим)
Я создал user, а создать повторно scourgea у меня не получилось, adduser выдает ошибку.

![вывод информации об создание пользователя](screenshots/Part2/Part2.jpg)

- Даю права командой `sudo usermod -aG adm user`
- Перехожу к пользователю командой `sudo su user`
- Проверяю записался ли мой новый пользователь в группу командой `groups`

![проверка информации об группе пользователя к какой группе он принадлежит](screenshots/Part2/test2.jpg)

Выводим логи командой `cat /var/log/syslog`

![вывод логов](screenshots/Part2/test3.jpg)

## 2.1 Проверка

В конце проверка командой `cat /etc/passwd`

![проверяем информацию об пользователе](screenshots/Part2/test4.jpg)


## Part 3. Настройка сети ОС

Узнаем текущее имя хоста через команду `hostname`

![показываем имя текущего хоста](screenshots/Part3/test3.1.jpg)

Командой `sudo hostname user-1` меняем имя хоста и сразу проверяем изменения

![замена имени хоста](screenshots/Part3/test3.2.jpg)

Командой `cat /etc/hostname` проверяем поменялись ли данные хоста или нет (в терминале может при выводе командой `hostname` показать что уже user-1)
Проверяем через команду `sudo nano /etc/hostname` – в случае неудачи меняем вручную
Командой `sudo nano /etc/hosts` проверяем записи в журнале hosts, в случае неудачи и в этом файле меняем вручную имя хоста. 
На скриншоте мы видим, что в журнале указано имя старого хоста. После ручной замены все данные стали корректными.

![проверяем записи в журнале](screenshots/Part3/test3.3.jpg)

**Установить временную зону, соответствующую вашему текущему местоположению.**  \
Для установки временной зоны используем команду - `sudo timedatectl set-timezone Europe/Moscow`
Проверяем изменения двумя командами `timedatectl` (в терминале) и `cat /etc/timezone` (в журнале)

![вывод информации об временной зоне](screenshots/Part3/test4.jpg)

Вывести названия сетевых интерфейсов с помощью консольной команды `ip link show`

![вывод названий сетевых интерфейсов](screenshots/Part3/test3.5.jpg)

## 3.1 Утилита net-tools
Можно установить утилиту `net-tools`
>Essential NetTools (net-tools) — набора сетевых утилит для диагностики сетей и мониторинга сетевых соединений. Служит для замены IP в Ubuntu.
>
>[Документация](http://linux.yaroslavl.ru/docs/book/lfsbook/appendixa/net-tools.html)

- Команда для установки утилиты `sudo apt install net-tools`
- Команда для проверки доступных сетевых интерфейсов `ifconfig`

![установка утилиты net-tools](screenshots/Part3/test3.8.jpg)

## 3.2 Расшифровка интерфейса lo

>lo (loopback device) – виртуальный интерфейс, присутствующий по умолчанию в любом Linux. Он используется для отладки сетевых программ и запуска серверных приложений на локальной машине. С этим интерфейсом всегда связан адрес 127.0.0.1. У него есть dns-имя – localhost. Посмотреть привязку можно в файле /etc/hosts.
>
>lo- loopback локальная петля, нужна для подключения к сети этого же компьютера, доп настроек не требует.

Используя команду `ip address`, мы сможем получить ip адрес устройства, на котором мы работаем, от DHCP сервера.
Команда `hostname -I` покажет все сетевые адреса хоста (системы), кроме интерфейса loopback.

![вывод информации об ip адресе устройства а также хостнайм адрес](screenshots/Part3/test3.9.jpg)

## 3.3 Расшифровка DHCP

>DHCP (англ. Dynamic Host Configuration Protocol — протокол динамической настройки узла) — прикладной протокол, позволяющий сетевым устройствам автоматически получать IP-адрес и другие параметры, необходимые для работы в сети TCP/IP. Данный протокол работает по модели «клиент-сервер». Для автоматической конфигурации компьютер-клиент на этапе конфигурации сетевого устройства обращается к так называемому серверу DHCP и получает от него нужные параметры. Сетевой администратор может задать диапазон адресов, распределяемых сервером среди компьютеров. Это позволяет избежать ручной настройки компьютеров сети и уменьшает количество ошибок. Протокол DHCP используется в большинстве сетей TCP/IP.
Протокол динамической настройки хоста (DHCP) — это сетевая служба, которая позволяет хост-компьютерам автоматически назначать настройки с сервера, а не вручную настраивать каждый сетевой хост. Компьютеры, настроенные как DHCP-клиенты, не могут контролировать параметры, которые они получают от DHCP-сервера, и конфигурация прозрачна для пользователя компьютера.
Наиболее распространенные настройки, предоставляемые DHCP-сервером DHCP-клиентам, включают:
IP-адрес и сетевая маска,
IP-адрес шлюза по умолчанию для использования,
IP-адреса DNS-серверов для использования.
Однако DHCP-сервер также может предоставлять такие свойства конфигурации, как: имя хоста, доменное имя, сервер времени, сервер печати.
Преимущество использования DHCP заключается в том, что любые изменения в сети, такие как изменение адреса DNS-сервера, необходимо изменить только на DHCP-сервере, и все сетевые узлы будут переконфигурированы при следующем опросе их DHCP-клиентами DHCP-сервера. . В качестве дополнительного преимущества также проще интегрировать новые компьютеры в сеть, так как нет необходимости проверять наличие IP-адреса. Конфликты при распределении IP-адресов также уменьшаются. Клиент настроенный на получение адреса по протоколу DHCP посылает запрос к серверу, и тот в свою очередь предоставляет свободный IP адрес клиенту во временное пользование. DHCP позволяет значительно уменьшить затраченное время на настройку сети, так же позволяет подключать клиента из одной сети в другую без изменения сетевых параметров.
[Подробнее](https://inlnk.ru/DBV2jQ)


**Определить и вывести на экран внешний ip-адрес шлюза (ip) и внутренний IP-адрес шлюза, он же ip-адрес по умолчанию (gw).**
Для получения внешнего адреса необходимо установить специальную утилиту Curl (Client URL).

## 3.4 Curl (Client URL)
> Curl (Client URL) Данная утилита доступна в большинстве систем на основе Unix и часто используется для получения данных по заданному url или передачи и получения файлов по различным протоколам. Команда cURL поддерживает множество протоколов. 
>
>`$ sudo apt-get install cutl`
>
>Для работы cURL необходима библиотека libcurl, без нее не будет работать cURL. Если данной библиотеки у вас нет и у вас установлена ОС Ubuntu , то установить ее можно при помощи следующих команд:
>
>`$ sudo apt update` \
>`$ sudo apt install libcurl3`
>
[Подробней](https://inlnk.ru/JjgDxp)

После установки Curl для проверки ip адреса используем команду `curl ident.me`

![установка Curl и вывод информации об ip адресе пользователя](screenshots/Part3/test3.10.jpg)

Далее выводим через `ip route` и `ip route  | grep default` информацию на экран

![](src/screenshots/Part3/test3.11.jpg)

## 3.5 Изменение файла netplan

Переходим к файлу конфигурации командой `sudo nano /etc/netplan/00-installer-config.yaml`, вносим и применяем необходимые изменения:

> 1) в статусе `dhcp4:` меняем параметр с `true` на `false`
> 2) создаем параметр `addresses:`, вписываем туда `ip адрес` (который мы получили при выводе команды `ip address` в шаге выше из строки enp0s3 из второй строки inet [10.0.2. 15/24])
> 3) создаем параметр `gateway4:`, вписываем туда адрес `gw` шлюза (который мы получили при выводе команды `ip route` в шаге выше в строке default via 10.0.2.2) 
> 4) создаем параметр `nameservers:`, оставляем его пустым, но подним мы заполняем след.параметр 
> 5) создаем параметр `addresses:`, сюда можем использовать `dns`, например, из задания публичный DNS серверы, например 1.1.1.1 или 8.8.8.8) 
> 6) сохраняем файл и выходим из него, в командной строке запускаем команду `sudo netplan apply` для обновления конфигурации

![изменение файла netplan и вывод актуальной информации](screenshots/Part3/test3.12.jpg)

**Перезагрузить виртуальную машину. Убедиться, что статичные сетевые настройки (ip, gw, dns) соответствуют заданным в предыдущем пункте.**

Проводим перезагрузку системы с помощью команды `sudo reboot`

![вывод команды перезагрузки системы](screenshots/Part3/test3.13.jpg)

Проверяем наши изменения с помощью команды `ip address show` и команды `ip route  | grep default` 
Мы видим на скриншоте, что наши настройки стали статическими

![вывод информации об настройках](screenshots/Part3/test3.14.jpg)


**Успешно пропинговать удаленные хосты 1.1.1.1 и ya.ru и вставить в отчёт скрин с выводом команды. В выводе команды должна быть фраза `"0% packet loss"`**

Для этого нам поможет команда `ping -c 4`, а в качестве испытуемого выступают удаленные хосты `1.1.1.1` и `ya.ru`

![вывод информации об пропингования удаленых хостов 1.1.1.1 и ya.ru](screenshots/Part3/test3.15.jpg)


## Part 4. Обновление ОС

**Обновить системные пакеты до последней на момент выполнения задания версии.**

> Для запуска обновления системы нам поможет команда `sudo apt upgrade`

После обновления системных пакетов, если ввести команду обновления повторно, должно появится сообщение, что обновления отсутствуют.
Вставить скриншот с этим сообщением в отчёт.

![вывод информации об процессе обновления системных пакетов](screenshots/Part4/test4.1.jpg)

## Part 5. Использование команды sudo
##### Разрешить пользователю, созданному в [Part 2](#part-2-создание-пользователя), выполнять команду sudo.

**Что такое команда sudo**

>Команда sudo ( substitute user and do, подменить пользователя и выполнить ) позволяет строго определенным пользователям выполнять указанные программы с административными привилегиями без ввода пароля суперпользователя root. Если быть точнее, то команда sudo позволяет выполнять программы от имени любого пользователя, но, если идентификатор или имя этого пользователя не указаны, то предполагается выполнение от имени суперпользователя root. Таким образом, использование sudo позволяет выполнять привилегированные команды обычным пользователям без необходимости ввода пароля суперпользователя root . Список пользователей и перечень их прав по отношению к ресурсам системы может быть настроен оптимальным образом для обеспечения комфортной и безопасной работы. Например, команда sudo в Ubuntu Linux, используется в режиме, позволяющем выполнять любые задачи администрирования системы без интерактивного входа под учетной записью root.
>

- Используя команду `sudo -l -U scourgea`, я смог сделать пользователя scourgea супер пользователем

- Используя команду `sudo hostnamectl set-hostname scourgea` установил хостом scourgea

![вывод информации об присвоение прав суперпользователя scourgea](screenshots/Part5/test5.1.jpg)


Проверка изменения имени хоста командой  `hostname`

![вывод информации об изменение хоста](screenshots/Part5/test5.2.jpg)

## Part 6. Установка и настройка службы времени

**Настроить службу автоматической синхронизации времени.**

## 6.1 Утилита NTP

> NTP (Network Time Protocol) — это сетевой протокол для синхронизации системного времени компьютера через сетевое соединение. NTP-клиент запрашивает время у общедоступного NTP-сервера, а затем использует ответ сервера для корректировки локальных часов. Когда NTP-клиент синхронизирует свои часы, используется UDP-порт 123.
>
> [Подробней](https://inlnk.ru/xvYzMa)


Для настройки времени нам потребуется утилита NTP:
- Устанавливаем командой  `sudo apt install -y ntp` 
- Проверяем настройки командой `dpkg -l | grep "ntp"` 
- Обновляем до последней версии командой `sudo apt update`

![вывод установки и обновления утилиты NTP ](screenshots/Part6/test6.0.jpg)

**Вывести время, часового пояса, в котором вы сейчас находитесь.**

Для этого мы используем команду `timedatectl show` и выводим информацию о времени, в котором мы сейчас находимся

![вывод информации об временной зоне](screenshots/Part6/test6.1.jpg)

**Вывод следующей команды должен содержать `NTPSynchronized=yes: timedatectl show`**

Выводим содержание на экран ниже

![вывод информации об временной зоне и использованием спеиальнйо команды NTPSynchronized=yes: timedatectl show](screenshots/Part6/test6.2.jpg)

Используя команду `ntpq -p` проверим, что NTP подключён к серверам времен

![вывод информации об подключение NTP к серверам времени](screenshots/Part6/test6.4.jpg)


Командой `sudo systemctl start ntp` запускаем работать модуль, после чего можем проверить статус его работы командой `sudo systemctl status ntp`
Командой `sudo ntpd -gq` принудительно синхронизируем.

![вывод информации о статусе работы модуля NTP и его синхронизации](screenshots/Part6/test6.5.jpg)

Командой `timedatectl` проверяем в конце всю нашу работаспособность еще раз

![вывод для проверки информации об временной зоне с учетом сделанных изменений ](screenshots/Part6/test6.6.jpg)


## Part 7. Установка и использование текстовых редакторов

**Установить текстовые редакторы VIM (+ любые два по желанию NANO, MCEDIT, JOE и т.д.)**

Установим 3 редактора и дальше продолжим работать с каждым из них:

Устанавливаем Joe с помощью команды `sudo apt install joe`

![процесс установки редактора Joe](screenshots/Part7/test7.0.jpg)

Устанавливаем Vim с помощью команды `sudo apt install vim`

![процесс установки редактора Vim](screenshots/Part7/test7.1.jpg)

Устанавливаем Nano с помощью команды `sudo apt install nano`

![процесс установки редактора Nano](screenshots/Part7/test7.2.jpg)


## Редактор JOE

Создание файла в Joe
используем команду `sudo joe test_JOE.txt`

![показываем создание файла в Joe](screenshots/Part7/joe0.jpg)

- Записал имя пользователя **scourgea** в файле test_JOE.txt. 
- Команда `Сontrol+k` позволит выбрать нужную функцию для управления файлом
- Нажимая после этого `Q` мы можем выйти из редактора. Прежде, чем выйти, редактор спросит – сохранить изменения или нет 
- Нажимая кнопку `Y` мы соглашаемся с сохранением внесеных изменений, кнопку `N` - нет. После чего будет произведен выход из редактора

![показываем создание записи в редакторе](screenshots/Part7/joe1.jpg)

Для поиска нажимам control+k и потом `F` пишем искомое слово и enter

![показываем систему поиска в редакторе](screenshots/Part7/joe2.jpg)

Можем вывести список различных команд в Joe команда для замены слов`R`

![показываем вывод списка системных команд](screenshots/Part7/joe4.jpg)

Провел замену слова в Joe с `scourgea` на `21School21`

![показываем систему замены в редакторе](screenshots/Part7/joe6.jpg)

Результат замены

![показываем результат замены в редакторе](screenshots/Part7/joe7.jpg)

При выходе редактор предлагает сохранить изменения, мы нажимаем `N` и выходим без изменений

![показываем выход из редактора без сохранения](screenshots/Part7/joe8.jpg)

## Редактор VIM

Создание файла в VIM
используем команду `sudo vim test_VIM.txt` 

![показываем создание файла в VIM](screenshots/Part7/vim0.jpg)

Можем вывести список различных команд в Vim

![показываем вывод различных системных команд в редакторе](screenshots/Part7/vim2.jpg)

Записал имя пользователя **scourgea** в файле test_VIM.txt. 
- При нажатии `i` открывается возможность записи в файл, после чего мы через esc выходим из режима редактирования и при нажатии `shift + :` попадаем в режим управления файлом. 
- В режиме управления файла мы можем за счет команды `:qw` сохранить все изменения и выйти из файла.

![показываем создание записи в редакторе](screenshots/Part7/vim1.jpg)

При изменении файла у нас есть возможность выйти из файла без сохранения, я заменил слово `scourgea` на слово `21School21` и с помощью команды `:q!` я могу покинуть программу принудительно без сохранения изменений

![показываем выход из редактора без сохранения](screenshots/Part7/vim3.jpg)

Для поиска и замены слова в Vim я использую команду `:s/scourgea/21School21/g` где :s/искомое слово/слово замены/g

![показываем систему замены в редакторе](screenshots/Part7/vim4.jpg)

## Редактор NANO

Создание файла в NANO
используем команду `sudo nano test_NANO.txt`

![показываем создание файла в NANO](screenshots/Part7/nano0.jpg)

Можем вывести список различных команд в NANO

![показываем вывод различных системных команд в редакторе](screenshots/Part7/nano1.jpg)

Записал имя пользователя **scourgea** в файле test_NANO.txt.
- Запись в файле ведется свободно при входе в редактор
- Для перехода в режим управления файлом требуется нажать команду `Ctrl + X` после чего становится доступно меню выбора дальнейших функций, для выхода из файла требуется нажать `Q` после чего появится вопрос сохранить изменения или нет, нажимая `Y` - мы соглашаемся, а `N` - нет

![показываем создание записи в редакторе](screenshots/Part7/nano2.jpg)

После сохранения в NANO возникает вопрос и по поводу названия файла, если хотим, можем либо изменить его, либо оставить без изменений

![показываем процесс сохранения изменений в файле](screenshots/Part7/nano4.jpg)

Чтобы NANO произвел поиск и замену текста мы нажимаем `Сontrol+ \`, внизу появится поле для ввода слова, которое мы ищем. В моем случае это scourgea и нажимаю enter

![показываем процесс поиска слова в редакторе](screenshots/Part7/nano5.jpg)

Я заменил слово `scourgea` на слово `21School21` и с помощью команды `Ctrl + X` я могу покинуть программу отменив сохранение через команду `N`

![показываем процесс замены слова в редакторе ](screenshots/Part7/nano6.jpg)

В завершении работы с разными текстовыми редакторами, проверим результат записи через вывод на экран содержимого каждого из файлов командой `cat`.

![вывод информации об содержимом каждого из файлов](screenshots/Part7/nano8.jpg)


## Part 8. Установка и базовая настройка сервиса SSHD

Установка ssh командой `sudo apt install ssh`

![показываем процесс установки ssh](screenshots/Part8/part8.0.jpg)

В настройках VirtualBox нужно добавить сеть с именем SSHD с портом хоста 2022 и с портом гостя 2022

![добавляем сеть и изменяем порты](screenshots/Part8/part8.1.jpg)

За счет команды `ssh -p 2022 scourgea@localhost` мы можем подключить наш Mac Терминал к Ubuntu

![показываем процесс подключения через локального хоста с терминала mac](screenshots/Part8/part8.2.jpg)

Перенастроил службу SSHd на порт 2022. Через команду `sudo vim /etc/ssh/sshd_config` 
Открыл файл и раскомментировал Port 2022

![показываем изменения в службе SSHD](screenshots/Part8/part8.3.jpg)

Добавил автостарт службе SSHD при загрузке системы через команду `sudo systemctl enable ssh`

![добавление автостарта службы SSHD](screenshots/Part8/part8.4.jpg)

**Используя команду ps, показать наличие процесса sshd. Для этого к команде нужно подобрать ключи**

Используя команды `ps au | grep sshd` мы выводим на экран все данные

![вывод информации об данных службы sshd](screenshots/Part8/part8.5.jpg)

Команда `ps au` выдает на 1 процесс больше, когда вводим ее через родной терминал Ubuntu, если выводить с терминала Mac, то там на 1 процесс меньше, которые используются (запущенные процессы)

![показываем действующее процессы](screenshots/Part8/part8.6.jpg)

> ps (показывает запущенные процессы, выполняемые пользователем в окне терминала). Используем утилиту grep для того, чтобы отобрать нужные нам процессы по определенному критерию. -e или -A (Чтобы просмотреть все запущенные процессы); -u, (U) - выбрать процессы пользователя.
-d (Чтобы показать все процессы, кроме лидеров сессии); -d -N (можно инвертировать вывод с помощью переключателя -N. Например, если хочу вывести только лидеров сеансов); T (увидеть только процессы, связанные с этим терминалом); r (просмотреть все работающие (running) процессы); -p 'pid' (если вы знаете идентификатор процесса PID, вы можете просто использовать следующую команду, для вывода процесса с этим 'pid'); -p 'pid1' 'pid2' ps U 'userlist' (найти все процессы, выполняемые конкретным пользователем); -ef (получить полный список); -t (--tcp) отображает соедниеня только по tcp; -a (--all) вывод всех активных подключений TCP; -n (--numeric) вывод активных подключений TCP с отображением адресов и номеров портов в числовом формате; -С - выбирать процессы по имени команды; -G - выбрать процессы по ID группы; -s - выбрать процессы по ID сессии;
>

- Сохранил, перезапустил командой `sudo service sshd restart` и проверил командой `sudo service sshd status`
- Проверяю статус фаервола командой `sudo ufw status` (статус - inactive), командой `sudo ufw enable` мы ставим активный статус 
- Открываю порт командой `sudo ufw allow 2022`
- Открываю терминал и перехожу в папку .ssh 12 
- Cоздаю директорию mkdir Bubuntu
- Узнаю ее адрес pwd (/home/scourgea/Bubuntu)
- Cоздаю ssh ключи командой `ssh-keygen` 
- Вставляю полученный адрес (от pwd) и +id_rsa. ключ сгенерирован 
- Командой `ssh-copy-id id_rsa.pub scourgea@localhost -p 2022` добавляю ключ на сервер 
- Сравниваю ключи командой `sudo cat ~/etc/.ssh/authorized_keys`

- Создаем файл с конфигурацией для ssh 
- sudo vim ~/.ssh/config и туда записывал Host localhost IdentityFile ~/.ssh/Bubuntu/id_rsa
- Делаю перезапуск командой `sudo service sshd restart`

Перезагружаю систему с помощью команды `systemctl restart sshd`
и вывожу информацию командой `ps`

![перезагружаю ситемную службу sshd](screenshots/Part8/part8.7.jpg)

Вывод команды `netstat -tan` должен содержать  \
`tcp 0 0 0.0.0.0:2022 0.0.0.0:* LISTEN`  \
(если команды netstat нет, то ее нужно установить)

![показываем содержание нужной строки](screenshots/Part8/part8.8.jpg)

## NETSTAT

> NETSTAT - отображение статистики сетевых соединений.
-t - Отображение текущего подключения в состоянии переноса нагрузки с процессора на сетевой адаптер при передаче данных
-a - Отображение всех подключений и ожидающих портов
-n - Отображение адресов и номеров портов в числовом формате.
Proto: Название протокола (протокол TCP или протокол UDP);
Recv-Q: очередь получения сети;
Send-Q: означает, что данные помещены в буфер отправки TCP/IP, но не отправлены или отправлены, но не подтверждены. Таким образом, высокое значение в Send-Q может быть связано с перегрузкой сети сервера, проблемой производительности сервера или управлением потоком пакетов данных и так далее.
Local Address: локальный IP-адрес участвующий в соединении или связанный со службой, ожидающей входящие соединения (слушающей порт). Адрес 127.0.0.1 - это петлевой интерфейс, используемый в качестве средства IP протокола для взаимодействия между процессами без реальной передачи данных.
Foreign Address: Внешний IP-адрес, участвующий в создании соединения.
State: Состояние - состояние соединения. Состояние Listening говорит о том, что строка состояния отображает информацию о сетевой службе, ожидающей входящие соединения по соответствующему протоколу на адрес и порт, отображаемые в колонке.

>Если в качестве адреса отображается 0.0.0.0 , то это означает - "любой адрес", т.е в соединении могут использоваться все IP-адреса существующие на данном компьютере.
>


## Part 9. Установка и использование утилит top, htop

Проводим установку утилиты htop командой `sudo apt install htop`

![показываем процесс установки утилиты htop](screenshots/Part9/part9.0.jpg)

**По выводу команды top определить и написать в отчёте:**

![показываем вывод информации команды top](screenshots/Part9/part9.1.jpg)

Отчет:

- uptime: 1:34
- кол-во авторизованных пользователей: 2
- общую загрузку системы: 0,00, 0,00, 0,00
- общее количество процессов: 99
- загрузку cpu: 0,0
- загрузку памяти: 156,2 / 409,4
- pid процесса занимающего больше всего памяти: 1
- pid процесса, занимающего больше всего процессорного времени: 1

**В отчёт вставить скрин с выводом команды htop:**
**отсортированному по PID, PERCENT_CPU, PERCENT_MEM, TIME**

Запускаем команду `htop` в терминале

![показываем содержание команды htop](screenshots/Part9/part9.2.jpg)

`F6` - открывает панель с выбором параметра сортировки процессов

![показываем системные команды](screenshots/Part9/part9.3.jpg)

Выбираем фильтр `CPU%` (PERCENT_CPU)

![показываем вывод с актуальным фистром CPU%](screenshots/Part9/part9.4.jpg)

Выбираем фильтр `TIME+` (TIME)

![показываем вывод с актуальным фистром TIME+](screenshots/Part9/part9.5.jpg)

Выбираем фильтр `MEM%` (PERCENT_MEM)

![показываем вывод с актуальным фистром MEM%](screenshots/Part9/part9.6.jpg)

отфильтровать процессы и найти процессы `sshd`
F4 — сортировка списка процессов

![показываем работы фильтра и отображение нужного процесса](screenshots/Part9/part9.7.jpg)

найти процесс `syslog`, используя поиск
F3 — поиск процесса

![показываем работы фильтра и отображение нужного процесса](screenshots/Part9/part9.8.jpg)

с добавленным выводом `hostname`, `clock` и `uptime`
F2 — настройки

![показываем меню выбора для редактирования вывода службы](screenshots/Part9/part9.9.jpg)

Отображение отчета с учетом внесеных изменений в шапку работающей системы с выводом `hostname`, `clock` и `uptime`

![отображение с учетом нужных установленных выводов служб](screenshots/Part9/part9.11.png)

## Part 10. Использование утилиты fdisk

Запустить команду `sudo fdisk -l`

![вывод информации от утилиты о работе памяти fdisk](screenshots/Part10/part10.0.jpg)

**В отчёте написать:**
- название жесткого диска: VBOX HARDDISK
- его размер: 10 GiB
- количество секторов: 20971520
- размер swap: 1.5G

![показан размер swap](screenshots/Part10/part10.1.jpg)

## Part 11. Использование утилиты df

Запустить команду `df`

![запускаем утилиту df](screenshots/Part11/part11.0.jpg)

>df (аббревиатура от disk free) — показывает список всех файловых систем по именам устройств, сообщает их размер, занятое и свободное пространство и точки монтирования.

**В отчёте написать для корневого раздела (/):**
- размер раздела: 1768056
- размер занятого пространства: 110128
- размер свободного пространства: 1549796
- процент использования: 7%

**Определить и написать в отчёт единицу измерения в выводе: 1K.**

Запустить команду `df -Th`

![вывод информации о свойствах памяти в единицах измерения](screenshots/Part11/part11.1.jpg)

>-h - выводить размеры в читаемом виде, в мегабайтах или гигабайтах, 
>-T - тип файловой системы.

**В отчёте написать для корневого раздела (/):**
- размер раздела: 1.7G
- размер занятого пространства: 108M
- размер свободного пространства: 1.5G
- процент использования: 7%

**Определить и написать в отчёт тип файловой системы для раздела: ext4.**

## Part 12. Использование утилиты du

Запустить команду `du` Просто команда `du` показывает кол-во открытых каналов, однако с добавлением флага `du -h` мы увидим уже размер в kb

![Использование утилиты du](screenshots/Part12/part12.0.jpg)

>du (аббревиатура от англ. disk usage) — стандартная Unix-программа для оценки занимаемого файлового пространства. По умолчанию показывает размер файлового пространства, занимаемого каждым файлом и каталогом в текущем каталоге.

**Вывести размер папок /home, /var, /var/log (в байтах, в человекочитаемом виде)**

Используем команду `sudo du -sh /var/log/ /home /var`
Мы можем через пробел перечислить все папки 

![вывод информации об весе каждой из искомых папок](screenshots/Part12/part12.1.jpg)

>-s - вывести только общий размер всех файлов и папок

**Вывести размер всего содержимого в /var/log (не общее, а каждого вложенного элемента, используя '*')**

Используем команду `sudo du -sh /var/log/*`

![вывод информации об весе каждого файла внутри папки log](screenshots/Part12/part12.2.jpg)


## Part 13. Установка и использование утилиты ncdu

Установить утилиту `ncdu`
Для установки утилиты нам потребуется команда `sudo apt install ncdu`

![показан процесс установки утилиты ncdu](screenshots/Part13/part13.0.jpg)

**Вывести размер папок /home, /var, /var/log**

Выводим размер папки /home с помощью команды `sudo ncdu /home`

![указание команды](screenshots/Part13/part13.1.jpg)
![вывод информацуии о размере папки home](screenshots/Part13/part13.2.jpg)

Выводим размер папки /var с помощью команды `sudo ncdu /var`
![указание команды](screenshots/Part13/part13.3.jpg)
![вывод информацуии о размере папки var](screenshots/Part13/part13.4.jpg)

Выводим размер папки /var с помощью команды `sudo ncdu /var/log`

![указание команды](screenshots/Part13/part13.5.jpg)
![вывод информацуии о размере папки log](screenshots/Part13/part13.6.jpg)

- Размеры должны примерно совпадать с полученными в Part 12. - **Совпадение есть**

## Part 14. Работа с системными журналами

**Открыть для просмотра:**
/var/log/dmesg

Для открытия содержимого журнало воспользуемся командой `cat` с указанием адреса расположения файла относительно корневой папки следующим образом `cat /var/log/dmesg`

![отображение информации в системном журнале dmesg](screenshots/Part14/part14.1.jpg)

>dmesg — в этом логе хранится информация о загрузке ядра и драйверов оборудования. В момент загрузки системы записывается вся основная информация, имеющая к ней отношение. Если у вас будут какие-то ошибки во время старта сервера, вы сможете их увидеть в этом логе.
>

**Открыть для просмотра:**
/var/log/syslog

Для открытия содержимого журнало воспользуемся командой `cat` с указанием адреса расположения файла относительно корневой папки следующим образом `cat /var/log/syslog`

![отображение информации в системном журнале syslog](screenshots/Part14/part14.2.jpg)

>syslog - глобальные системные журналы операционной системы linux. Сюда пишутся события загрузки, ядра системы, системы инициализации systemd и т.д.
>

**Открыть для просмотра:**
/var/log/auth.log

Для открытия содержимого журнало воспользуемся командой `cat` с указанием адреса расположения файла относительно корневой папки следующим образом `cat /var/log/auth.log`

![отображение информации в системном журнале auth.log](screenshots/Part14/part14.3.jpg)


>auth.log — лог авторизации и аутентификации в системе, в том числе ssh.


**Написать в отчёте:**

Время последней успешной авторизации: Mar 14 14:41:00
Имя пользователя: scourgea
Метод входа в систему: 
- Через приложение VirtualBox запускаю виртуальную машуну "Bubunta" через **(указать метод запуска)**, Ubunta server (серверная операционная система на базе ядра Linux без графической оболочки)
- Дальше подключаюсь через терминал на Mac-e, используя подключение через `Network` --> `Advanced` --> `Port Forwarding` --> указываю протоколо `TCP` --> в `Host Port` указываю любое число больше 2000 --> в `Guest Port` указываю любое число больше 20
- Подключение происходит через команду `ssh -p 2022 scourgea@localhost` , где число это то самое число которое я указываю в графе `Host Port`
- Происходит процесс авторизации меня в виртуальной машины и для доступа к терминалу Ubuntu мне нужно ввести пароль от пользователя `scourgea`

**Перезапустить службу SSHd.**

Вставить в отчёт скрин с сообщением о рестарте службы (искать в логах).

Для перезапуска SSHd службы нам нужно воспользоваться командой `sudo service sshd restart` 
А для вывода информации на экран об restart мы можем вывести командой `tail /var/log/auth.log`

![вывод информации на экран об restart](screenshots/Part14/part14.4.jpg)

## Part 15. Использование планировщика заданий CRON

**Используя планировщик заданий, запустите команду uptime через каждые 2 минуты**

Для входа в журнал для записи воспользуемся командой `crontab -e` При первом использование у нас утилита спросил через какой редактор открыть журнал и предоставит на выбор все возможные редакторы

В данном журнале нам необходимо вписать следующую строку `*/2 * * * * uptime  | wall`
сохраняем все изменения и выходим 

![запись в журнал CRON задания](screenshots/Part15/part15.1.jpg)

>Cron (Command Run ON) — система для автоматического запуска программ и скриптов на сервере в определённое время.
Управлять cron нужно с помощью команды 'crontab'.
Команда crontab -l покажет список текущих заданий, crontab -e автоматически запустит текстовый редактор и загрузит в него файл конфигурации cron. После выхода из редактора, новая конфигурация cron будет установлена (вступит в силу) автоматически.
>
>Конфигурационный файл содержит последовательность командных строк и расписание их вызова. Пустые строки и строки, начинающиеся с символа '#' игнорируются. Остальные строки являются установками переменных окружения и командами cron.
>
>Запись crontab- файла в общем случае состоит из семи полей:
минуты   часы   день  месяц   день_недели  имя_пользователя   команда
>
>[Помощник](https://crontab.guru/every-2-minutes) по crontab

После того как мы внесли изменения в журнал в терминале каждые 2 минуты появляется следующие сообщение:

![вывод сообщения в терминале планировщиком](screenshots/Part15/part15.2.jpg)

![вывод сообщений в терминале планировщиком каждые 2 минуты](screenshots/Part15/part15.4.jpg)

Так же мы можем проверить и в системном журнале какие действия у нас происходят и туда записываются, с помощью команды `cat /var/log/syslog`

![показываем записи из журнала syslog об активации планировщика и совершения им действия](screenshots/Part15/part15.3.jpg)

## [END](#contents)
